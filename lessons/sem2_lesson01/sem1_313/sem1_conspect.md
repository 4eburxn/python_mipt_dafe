# Семинар 1. Менеджер пакетов и виртуальное окружение.

В этом семестре нам так или иначе придется работать с библиотеками, не являющимися частью стандартной библиотеки Python (так называемые *third party software*). Минимальный набор действий, которые необходимо совершить для работы с подобными библиотеками - скачивание и установка. Однако, если вы хотите организовать комфортную работу над несколькими проектами с большим числом различных, часто несовместимых между собой,зависимостей, а также иметь возможность поделиться своими проектами с прочими разработчиками - вам необходимо нечто большее, чем простое скачивание и установка пакетов с софтом. Именно этому и будет посвящено наше сегодняшнее занятие. 

## pip. Менеджер пакетов.

Несмотря на то, что Python обладает очень богатой стандартной библиотекой, существующих модулей порой может быть недостаточно, чтобы решать некоторые специфичные задачи в определенных доменах. Собственно, для решения таких задач силами сообщества Python и разрабатываются различные библиотеки. Сегодня количество библиотек для Python настолько велико, что с большой долей вероятности вы сможете найти готовое программное решение для вашей конкретной проблемы. Так сообществом Python были созданы библиотеки для обработки больших массивов числовых данных, создания и обучения глубоких нейронных сетей, веб-разработки, расчетов передаточных функций в соответствии с теорией автоматического управления и т.д. и т.п.

Для того чтобы как-то облегчить разработчикам сценарии по работе с таким большим многообразием сторонних библиотек, в Python реализован свой собственный пакетный менеджер, который называется PIP. Название утилиты - рекурсивный акроним, который расшифровывается, как *pip install packages* (*pip устанавливает библиотеки*). Т.к. сторонние библиотеки стали настолько важной частью языка, что начиная с версии 3.4 PIP распространяется вместе с интерпретатором. Если вы следовали мануалу по установке интерпретатора, приложенного к первой лекции первого семестра, то скорее всего уже установлен на ваш компьютер. Иначе вам придется установить его вручную самостоятельно. Для этого можно воспользоваться например [этим мануалом](https://pip.pypa.io/en/stable/installation/).

### Проверяем наличие pip

Чтобы удостовериться, что PIP установлен и добавлен в path, выполним следующую команду:

*Windows*:
```console
where pip
```

*Linux/MacOS*:
```console
which pip
```

Данная команда позволяет получить абсолютный путь до утилиты PIP. В случае, если на вашем компьютере установлено несколько версий Python, команда выведет несколько путей. Если команда не вывела ни одного пути, значить вам нужно или переустановить pip, или добавить путь до pip в path. На Windows это делается через изменение Переменных локальных сред, на Unix-подобных системах - через редактирование переменной **PATH**. 

### pip install - простейший вид

Обычно перед началом работы над каким-либо проектом на языке Python первое с чего начинают разработку - создание виртуального окружения для данного проекта. Чуть позже мы с вами разберемся, как это работает, и почему это делают, сейчас же не будем особо задумываться и просто выполним команды ниже:

*Windows*:
```console
python -m venv venv
.\venv\Scripts\activate
```

*Linux/MacOS*:
```console
python -m venv venv
source venv/bin/activate
```

После создания и активации виртуального окружения мы можем приступать к скачиванию и установке нужных нам библиотек. Для этого мы можем использовать pip двумя разными способами: как самостоятельную утилиту или как модуль python. Все команды pip могут быть исполнены используя оба этих подхода.

```console
pip install <package> [<package2> <package3> ...]
python -m pip install <package> [<package2> <package3> ...]
```

В обоих случаях нами была выполнена команда `pip install`, которая делает следующее:
- Ищет последнюю версию библиотеки с указанными именем в [PyPI](https://pypi.org/) (Python Packet Index) - специальном удаленном хранилище, в котором разработчики публикуют свои библиотеки;
- Ищет все зависимости для указанной библиотеки;
- Скачивает и устанавливает библиотеку и её зависимости в текущее виртуальное окружение;

В простейшем случае команда `pip install` в качестве аргумента получает имя библиотеки, однако, как видно из примера выше, вы можете передать данной команде сразу несколько идентефикаторов пакетов.

### pip list - просмотр текущих зависимостей

С помощью команды `pip list` вы можете получить информацию о библиотеках, установленных в активное виртуальное окружение. Данная информация представляется в виде удобное табличк, в которой также указаны используемые версии библиотек:

*Вызов в консоле*:
```console
pip list
```

*Пример результата*:
```console
flake8            6.1.0
matplotlib        3.8.0
numpy             1.26.1
Pillow            10.0.1
pydantic          2.5.2
```

### pip show - просмотр информации о библиотеке

С помощью команды `pip show <package>` вы можете просмотреть мета информацию библиотеки. Это может быть полезным для того, чтобы выяснить, является ли данная библиотека зависимостью для прочих библиотек в текущем виртуальном окружении, и как следствие, можно ли ее безопасно удалить. 

*Вызов в консоле*:
```console
pip show numpy
```

*Пример результата*:
```console
Name: numpy
Version: 1.26.1
Summary: Fundamental package for array computing in Python
Home-page: https://numpy.org
...
Location: C:\Users\Michail\Desktop\mipt\teaching\python_mipt_dafe\venv\Lib\site-packages
Requires:
Required-by: contourpy, matplotlib
```

### pip install - продвинутое использование

#### Custom Index
Не все библиотеки публикуются в PyPI. Иногда существует необходимость в создании своего собственного индекса и распространении определенной библиотеки исключительно через подобный кастомный индекс. Например, подобное имеет место в государственных организациях, связанных с ОПК. В этом случае вы можете явно сообщить pip'у по какому адресу находится требуемый индекс, и где именно следует искать необходимую библиотек. Для этого существует специальная опция `-i` или ее полная форма `--index-url`.

*Пример использования*:
```console
pip install -i https://index-url.com <package-name>
```

#### GitHub
Также некоторое количество полезных библиотек публикуются в виде репозиториев на GitHub. В этом случае у вас также есть возможность установить библиотеку напрямую из репозитория явно сообщив pip'у, что поиск долже происходить на GitHub.

*Пример*:
```console
pip install git+https://github.com/repo/package
```

#### Редактируемый режим
Во время работы над собственной библиотекой, обычно осуществляют установку этой библиотеки в редактируемом режиме в активное виртуальное окружение. Это решает две проблемы:
- При разработке вам не нужно прописывать сложные пути импортов;
- Вам не придется переустанавливать библиотеку каждый раз при внесении изменений, т.к. в редактируемом режиме интерпретатор делает это за вас самостоятельно;

Для установки библиотеки в редактируемом режиме, необходимо переместиться в деректорию с `setup.py` файлом, в котором описаны детали библиотеки, и выполнить команду `pip install` с флаго `-e`.

*Пример*:
```console
pip install -e .
```

В данном примере мы устанавливаем библиотеку, описание которой хранится в текущий директории, а флаг -e указывает на то, что мы хотим установить ее в редактируемом режиме.

#### Requirements

